# be-chess

2025 마스터즈 체스 프로젝트

## 주의할 점

- Lucas 컨텐츠의 내용을 공개된 저장소 또는 웹에 올리는 것은 엄격하게 금지합니다.
- 커밋메시지는 한글로 두 줄 이상 작성합니다.
- MVC 패턴은 사용하지 않습니다.


**구현 방식**
### 1단계
- Junit을 이용해 테스트를 진행한다.
- @DisplayName을 이용해 각 테스트를 명확하게 한다.
- Pawn클래스는 색상을 생성자 매개변수로 받는다.

### 2단계
- 흰색과 검은색을 상수로 관리한다.
- 생성자 매개변수가 없는 경우 흰색을 기본으로 생성한다.
- Board는 Pawn의 리스트를 가진다.
- 현재 보드판에 놓인 폰의 갯수를 확인할수 있는 size()를 만든다.
- 인덱스를 매개변수로 추가된 폰을 가져오는 findPawn()을 구현한다.
- Board에 Pawn이외의 객체가 들어올 경우 컴파일 에러를 발생시킨다.
- @BeforeEach를 사용하여 테스트에서 사용하는 공통 변수들을 초기화한다.`

### 3단계
- Pawn의 생성자 두번째 매개변수로 출력할 값을 전달한다.
- 체스판을 초기화하면 흰색 폰 8개, 검은색 폰 8개를 추가한다.
- getPawnResult에서 폰의 출력값을 StringBuilder로 리턴한다.
- 체스판을 8*8크기의 이차원 배열로 선언한다.
- initialize에서 폰들을 각 위치에 배치한다.
- main에서 사용자의 입력을 받는다.
- end이면 종료, start면 현재 보드 상태를 출력한다.

### 4단계
- "\n"을 모든 운영체제에서 처리하기 위해 StringUtils를 만든다.
- Piece를 값객체로 만들어서 종류별로 리턴해주는 팩토리 메소드를 구현한다.
- 보드를 초기화 할 시 모든 종류의 체스 말들이 추가된다.
- 말의 색을 확인하는 메소드를 추가한다.
- 팩토리 메서드 패턴을 사용해서 체스 말들을 생성하려 했으나 private 생성자를 사용해서 외부에서 생성이 불가능 하기 때문에 패턴보다는 클래스 내부에서 생성 후 리턴하는 메소드를 구현했다.

### 5단계
- Piece 내부의 enum을 사용해 기물의 색과 종류를 구분한다.
- 색과 종류에 따른 출력문자를 리턴하는 메소드를 만든다.
- 기물이 존재하지 않는 Piece를 생성하기 위한 메소드를 구현한다.
- 체스판의 빈 구역을 Piece로 초기화하기 위해 ArrayList<Rank>, Rank 일급 콜렉션을 고려한다.
- 기물의 색과 종류를 입력받으면 해당 기물의 수를 리턴하는 메소드를 구햔한다.
- 위치를 입력받고 해당 위치에 존재하는 기물을 리턴하는 메소드를 구현한다.
- 임의의 위치에 기물을 추가하는 기능을 추가한다.
- 위치값을 추출하는 클래스를 고려한다.
- 체스판 위에 남아있는 기물의 점수를 계산하는 메소드를 구현한다.
- 폰이 세로로 있는경우 각 0.5점으로 친다.
- 색상별 보드에 존재하는 기물 리스트를 구현해 점수 계산을 빠르게 할지 고려한다.
- 각 색상별로 점수가 높은 순으로 정렬한다.

### 6단계
- board.move()를 피스를 제공하는게아닌 시작 위치에 있는 기물을 도착위치로 이동하도록 수정한다.
- 사용자에게 move 명령을 받아서 기물을 움직인다.
- Board 클래스를 체스판 구현 부분과, 게임 로직을 구현하는 부분으로 나눈다.
- king의 움직임을 구현한다. 자신을 중심으로 8방향으로 움직일 수 있다.
- 이동 위치에 체스판 밖으로 이동하거나 같은 편의 기물이 있는지 확인하고 해당 상황에 있다면 입력을 다시 받는다.
- queen의 이동을 구현하기 위해 재귀 호출을 사용한다. 입력 방향으로 한칸씩 이동하며 다른 기물이 있는지 확인한다.
- 같은 색이면 한칸 이전에서 멈추고 다른 색이면 해당 위치의 기물을 지우고 퀸을 위치시킨다.
- Piece를 상속하는 기물 클래스들을 만들어 다형성을 활용하고 중복을 제거한다.
- verifyMovePosition()을 추상 클래스로 만들어 각 기물이 이동가능한 위치를 검증한다.
- Direction enum을 추가하여 방향을 표현한다.
- 각각의 기물에 대한 테스트를 구현한다.

### 7단계
- 기물이 이동하는 경로에 다른 기물이 있는 경우 에러를 내고 다시 움직임을 다시 입력받는다.
- 백과 흑이 번갈아 움직이도록 한다.
- 폰이 상대를 잡는 경우 대각선으로만 잡는다.
- 에러가 발생하는 경우 사용자에게 재입력을 요구한다.
- 폰관련 로직을 ChessGame에서 Pawn으로 리팩토링 한다.

**트러블 슈팅**
- Junit설정을 했지만 Test클래스에서 import가 되지 않는 문제,
  testImplementation으로 의존성을 설정했는데 클래스 경로를 test가 아닌 main에 만들어서 발생했다.
 테스트 클래스를 test/java로 이동시켜 해결
- Pawn의 매개변수 1개 생성자를 2개로 바꿔서 테스트를 수행하려 했으나 기존에 작성했던 테스트가 매개변수 1개의 생성자를 사용하여 오류발생,
 생성자를 수정하기 보다는 갯수별로 생성자를 추가하여 테스트 코드의 수정없이 오류 해결
- Type의 출력문자를 각 색상마다 바꾸기 위해 change()라는 메소드를 사용하여 관리하려 했지만 출력문자가 이상해지는 문제 발생, 흰색 -> 검은색으로 바꾸기 위해
 흰색 +6을 하였는데 폰을 제와한 기물은 해당 규칙이 적용되었지만 폰은 해당 규칙이 적용되지 않았다. 또한 입력한 유니코드가 아닌 다른 값이 들어가는 문제도 발생했다.
- 기물 이동을 구현 하던 중 위치를 하나만 주었는데 매 줄마다 기물이 이동하는 문제가 발생했다. 초기화 과정을 단순화 시키기 위해 ㄹ리스트 한줄을 초기화 한 후 
 해당 리스트를 체스판에 넣었는데 각 줄이 같은 리스트를 참조하면서 벌어진 문제였다. 매줄마다 리스트를 새로 생성해주면서 해결했다.